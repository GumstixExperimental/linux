/*
* Copyright (C) 2017 Gumstix, Inc. - https://www.gumstix.com/
*
* This program is free software; you can redistribute it and/or modify
* it under the terms of the GNU General Public License version 2 as
* published by the Free Software Foundation.
*/
/dts-v1/;

#include <dt-bindings/input/input.h>
#include <dt-bindings/interrupt-controller/irq.h>
#include "omap3-overo-storm.dtsi"

/{
    model = "OMAP36xx/AM37xx/DM37xx Gumstix Overo on Geppetto - mEMI v1";
    compatible = "gumstix,omap3-overo-memi-v1", "gumstix,omap3-overo", "ti,omap36xx", "ti,omap3";


    vdd33a5: regulator-vdd33a {
        status = "okay";
        compatible = "regulator-fixed";
        regulator-name = "vdd33a";
        regulator-always-on;
    };
    vddvario5: regulator-vddvario {
        status = "okay";
        compatible = "regulator-fixed";
        regulator-name = "vddvario";
        regulator-always-on;
    };
    gpio_header_203097 {
        status = "okay";
        pinctrl-names = "default";
        pinctrl-0 = <&gpio_header_203097_default>;
        type = "gpio_header";

        gpio_header_0 {
            label = "gpio_header_0";
            type = "gpio_header";
            gpios = <&gpio1 17 0>;
            gpio-hog;
            input;
        };

        gpio_header_1 {
            label = "gpio_header_1";
            type = "gpio_header";
            gpios = <&gpio1 18 0>;
            gpio-hog;
            input;
        };

        gpio_header_2 {
            label = "gpio_header_2";
            type = "gpio_header";
            gpios = <&gpio1 19 0>;
            gpio-hog;
            input;
        };

        gpio_header_3 {
            label = "gpio_header_3";
            type = "gpio_header";
            gpios = <&gpio1 20 0>;
            gpio-hog;
            input;
        };

        gpio_header_4 {
            label = "gpio_header_4";
            type = "gpio_header";
            gpios = <&gpio5 18 0>;
            gpio-hog;
            input;
        };

        gpio_header_5 {
            label = "gpio_header_5";
            type = "gpio_header";
            gpios = <&gpio5 19 0>;
            gpio-hog;
            input;
        };

        gpio_header_6 {
            label = "gpio_header_6";
            type = "gpio_header";
            gpios = <&gpio1 23 0>;
            gpio-hog;
            input;
        };

        gpio_header_7 {
            label = "gpio_header_7";
            type = "gpio_header";
            gpios = <&gpio5 17 0>;
            gpio-hog;
            input;
        };
    };
    leds {
        status = "okay";
        pinctrl-names = "default";
        pinctrl-0 = <&leds_default>;
        compatible = "gpio-leds";
        trigger = "none";
        default-state = "off";
        type = "led";

        led_0 {
            label = "led_0";
            trigger = "none";
            default-state = "off";
            type = "led";
            gpios = <&gpio1 21 GPIO_ACTIVE_HIGH>;
        };

        led_1 {
            label = "led_1";
            trigger = "none";
            default-state = "off";
            type = "led";
            gpios = <&gpio1 22 GPIO_ACTIVE_HIGH>;
        };
    };

};

&vpll2 {
    regulator-always-on;
};



// uart1 device

&uart1 {
    status = "okay";
    pinctrl-names = "default";
    pinctrl-0 = <&uart1_default>;
};

// ethernet device

&gpmc {
    status = "okay";
    pinctrl-names = "default";
    pinctrl-0 = <&smsc_default>;
    ranges = <5 0 738197504 16777216>;
    type = "ethernet";

        ethernet@5,0 {
            gpmc,rd-cycle-ns = <50>;
            phy-mode = "mii";
            vdd33a-supply = <&vdd33a5>;
            gpmc,wr-access-ns = <50>;
            gpmc,adv-wr-off-ns = <10>;
            gpmc,cs-rd-off-ns = <50>;
            gpmc,device-width = <1>;
            gpmc,sync-clk-ps = <20000>;
            gpmc,oe-off-ns = <50>;
            gpmc,wr-cycle-ns = <50>;
            reg-io-width = <4>;
            gpmc,cs-wr-off-ns = <50>;
            gpmc,cycle2cycle-delay-ns = <35>;
            gpmc,page-burst-access-ns = <0>;
            gpmc,oe-on-ns = <15>;
            compatible = "smsc,lan9221",
    		"smsc,lan9115";
            gpmc,bus-turnaround-ns = <35>;
            gpmc,adv-rd-off-ns = <10>;
            gpmc,we-on-ns = <15>;
            bank-width = <2>;
            gpmc,wr-data-mux-bus-ns = <35>;
            gpmc,clk-activation-ns = <5>;
            gpmc,cs-on-ns = <10>;
            gpmc,access-ns = <50>;
            vddvario-supply = <&vddvario5>;
            gpmc,adv-on-ns = <0>;
            reg = <5 0 0xff>;
            gpmc,wait-monitoring-ns = <0>;
            gpmc,we-off-ns = <50>;
            gpmc,sync-read;
            gpmc,sync-write;
            smsc,save-mac-address;
            gpmc,mux-add-data;
            gpmc,cycle2cycle-samecsen;
            gpmc,cycle2cycle-diffcsen;
        };
};

// uart3 device

&uart3 {
    status = "okay";
    pinctrl-names = "default";
    pinctrl-0 = <&uart3_default>;
    type = "uart";
};

// i2c_buses device

&i2c3 {
    status = "okay";
    pinctrl-names = "default";
    pinctrl-0 = <&i2c3_default>;
    clock-frequency = <400000>;

        lsm303d: lsm303d@1e {
            compatible = "lsm303d";
            type = "i2c";
            reg = <30>;
            int2-gpio = <&gpio1 13 GPIO_ACTIVE_HIGH>;
            int1-gpio = <&gpio1 12 GPIO_ACTIVE_HIGH>;
        };

        l3gd20: l3gd20@6a {
            compatible = "l3gd20h_gyr";
            type = "i2c";
            reg = <106>;
            int-gpio = <&gpio6 3 GPIO_ACTIVE_HIGH>;
        };

        tmp102: tmp102@48 {
            reg = <72>;
            compatible = "ti,tmp102";
            type = "i2c";
    
            interrupt-parent = <&gpio1>;
            interrupts =<10 IRQ_TYPE_LEVEL_LOW>;
        };
};

// spi_buses device

&mcspi1 {
    status = "okay";
    pinctrl-names = "default";
    pinctrl-0 = <&mcspi1_default>;
    compatible = "ms5611";
    type = "spi";

        ms5611 {
            compatible = "ms5611";
            type = "spi";
        };
};




&omap3_pmx_core {
    mcspi1_default: pinmux_mcspi1_default {
        pinctrl-single,pins = <
            OMAP3_CORE1_IOPAD(0x21c8, MUX_MODE0 | PIN_INPUT) /* mcspi1_clk.mcspi1_clk */
            OMAP3_CORE1_IOPAD(0x21cc, MUX_MODE0 | PIN_INPUT) /* mcspi1_cs0.mcspi1_cs0 */
            OMAP3_CORE1_IOPAD(0x21d0, MUX_MODE0 | PIN_INPUT) /* mcspi1_cs1.mcspi1_cs1 */
            OMAP3_CORE1_IOPAD(0x21ce, MUX_MODE0 | PIN_INPUT) /* mcspi1_somi.mcspi1_somi */
            OMAP3_CORE1_IOPAD(0x21ca, MUX_MODE0 | PIN_INPUT) /* mcspi1_simo.mcspi1_simo */
        >;
    };
    uart1_default: pinmux_uart1_default {
        pinctrl-single,pins = <
            OMAP3_CORE1_IOPAD(0x2182, MUX_MODE0 | PIN_INPUT) /* uart1_rx.uart1_rx */
            OMAP3_CORE1_IOPAD(0x217c, MUX_MODE0 | PIN_OUTPUT) /* uart1_tx.uart1_tx */
        >;
    };
    smsc_default: pinmux_smsc_default {
        pinctrl-single,pins = <
            OMAP3_CORE1_IOPAD(0x21d2, MUX_MODE4 | PIN_INPUT) /* mcspi1_cs2.gpio_176 */
            OMAP3_CORE1_IOPAD(0x20d2, MUX_MODE4 | PIN_INPUT) /* gpmc_wait3.gpio_65 */
        >;
    };
    uart3_default: pinmux_uart3_default {
        pinctrl-single,pins = <
            OMAP3_CORE1_IOPAD(0x219e, MUX_MODE0 | PIN_INPUT) /* uart3_rx_irrx.uart3_rx_irrx */
            OMAP3_CORE1_IOPAD(0x21a0, MUX_MODE0 | PIN_OUTPUT) /* uart3_tx_irtx.uart3_tx_irtx */
        >;
    };
    i2c3_default: pinmux_i2c3_default {
        pinctrl-single,pins = <
            OMAP3_CORE1_IOPAD(0x21c2, MUX_MODE0 | PIN_INPUT) /* i2c3_scl.i2c3_scl */
            OMAP3_CORE1_IOPAD(0x21c4, MUX_MODE0 | PIN_INPUT) /* i2c3_sda.i2c3_sda */
            OMAP3_CORE1_IOPAD(0x25da, MUX_MODE4 | PIN_INPUT) /* etk_ctl.gpio_13 */
            OMAP3_CORE1_IOPAD(0x25d8, MUX_MODE4 | PIN_INPUT) /* etk_clk.gpio_12 */
            OMAP3_CORE1_IOPAD(0x219a, MUX_MODE4 | PIN_INPUT) /* uart3_cts_rctx.gpio_163 */
        >;
    };
};


&omap3_pmx_core2 {
    gpio_header_203097_default: pinmux_gpio_header_203097_default {
        pinctrl-single,pins = <
            OMAP3630_CORE2_IOPAD(0x25e2, MUX_MODE4 | PIN_INPUT) /* etk_d3.gpio_17 */
            OMAP3630_CORE2_IOPAD(0x25e4, MUX_MODE4 | PIN_INPUT) /* etk_d4.gpio_18 */
            OMAP3630_CORE2_IOPAD(0x25e6, MUX_MODE4 | PIN_INPUT) /* etk_d5.gpio_19 */
            OMAP3630_CORE2_IOPAD(0x25e8, MUX_MODE4 | PIN_INPUT) /* etk_d6.gpio_20 */
            OMAP3630_CORE2_IOPAD(0x2178, MUX_MODE4 | PIN_INPUT) /* uart2_tx.gpio_146 */
            OMAP3630_CORE2_IOPAD(0x217a, MUX_MODE4 | PIN_INPUT) /* uart2_rx.gpio_147 */
            OMAP3630_CORE2_IOPAD(0x25ee, MUX_MODE4 | PIN_INPUT) /* etk_d9.gpio_23 */
            OMAP3630_CORE2_IOPAD(0x2176, MUX_MODE4 | PIN_INPUT) /* uart2_rts.gpio_145 */
        >;
    };
    leds_default: pinmux_leds_default {
        pinctrl-single,pins = <
            OMAP3630_CORE2_IOPAD(0x25ea, MUX_MODE4 | PIN_INPUT) /* etk_d7.gpio_21 */
            OMAP3630_CORE2_IOPAD(0x25ec, MUX_MODE4 | PIN_INPUT) /* etk_d8.gpio_22 */
        >;
    };
};